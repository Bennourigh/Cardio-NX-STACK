<div class="container">
  <p-card>
    <ng-template pTemplate="header">
      <div>
        <span class="p-card-title">
          Devices {{ clientId }}
        </span>
        <p-divider></p-divider>
      </div>
    </ng-template>
    <ng-template pTemplate="content">
      <p-table [value]="dataSource" [paginator]="true" [rows]="10" [rowsPerPageOptions]="[5, 10, 20, 30]" class="p-datatable p-component p-shadow-1" sortMode="multiple">
        <ng-template pTemplate="header">
          <tr>
            <th pSortableColumn="deviceSN">Device SN <p-sortIcon field="deviceSN"></p-sortIcon></th>
            <th pSortableColumn="dateInstallation">Date Installation <p-sortIcon field="dateInstallation"></p-sortIcon></th>
            <th pSortableColumn="type">Type <p-sortIcon field="type"></p-sortIcon></th>
            <th pSortableColumn="batteryLevel">Battery Level <p-sortIcon field="batteryLevel"></p-sortIcon></th>
            <th pSortableColumn="dlc">Electrodes DLC <p-sortIcon field="dlc"></p-sortIcon></th>
            <th>History</th>
            <th>Schedule</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-element>
          <tr>
            <td>{{ element.deviceSN }}</td>
            <td>{{ element.dateInstallation }}</td>
            <td>{{ element.type }}</td>
            <td>{{ element.batteryLevel }}</td>
            <td>{{ element.dlc }}</td>
            <td>
              <p-button label="History" icon="pi pi-history" class="p-button-raised p-button-primary" (click)="toEvents(element)"></p-button>
            </td>
            <td>
              @if (clientId) {
                <p-button label="Schedule" icon="pi pi-calendar" class="p-button-raised p-button-primary" (click)="schedule(element)"></p-button>
              }
            </td>
          </tr>
        </ng-template>
      </p-table>
    </ng-template>
  </p-card>
</div>
